<!DOCTYPE html>
<html lang="en">
    <%- include('./partialViews/head.ejs') %>
<body>
    <%- include('./partialViews/header.ejs') %>

    <% if(typeof userData !='undefined' ){%>

    <form action="/productos/edit/<%= product.id %>?_method=PUT" method="POST" enctype="multipart/form-data" id="form-updateProduct"> 
        <section class ="fondo-formularios">
        <section class = "form-register">
                <ul class="ulErrores">

                </ul> 
                <h1>Editá tu producto</h1>
                <input class = "controls" type = "text" name="nombre_producto" id="nombre_producto" placeholder="¿Cómo se llama?" value="<%= product.nombre_producto %>">
                <span class="text-danger"></span>
                <input class = "controls" type = "text" name="descripcion_producto" id="descripcion_producto" placeholder="Describilo" value="<%= product.descripcion_producto %>">
                <span class="text-danger"></span>
                <input class = "controls" type = "text" name="precio_producto" id="precio_producto" placeholder="¿A qué precio lo vendés?" value="<%= product.precio_producto %>">
                <span class="text-danger"></span>
                <h4>
                <label>¿De qué color es?</label>
                <select name="id_color">

                    <% listaColores.forEach(color => { %>
                        <option value="<%= color.id_color %>" <%= locals.oldData && (oldData.id_color===color.id_color) ? 'selected':null %> ><%= color.nombre %></option>
                    <% }); %>
                    <!-- <option value="mostaza" <%= locals.oldData && (oldData.color_producto==='mostaza') ? 'selected':null %> >Mostaza</option>
                    <option value="negro" <%= locals.oldData && (oldData.color_producto==='negro') ? 'selected':null %> >Negro</option>
                    <option value="blanco" <%= locals.oldData && (oldData.color_producto==='blanco') ? 'selected':null %> >Blanco</option>
                    <option value="violeta" <%= locals.oldData && (oldData.color_producto==='violeta') ? 'selected':null %> >Violeta</option>
                    <option value="verde" <%= locals.oldData && (oldData.color_producto==='verde') ? 'selected':null %> >Verde</option> -->
                </select>
                </h4>              
                <h4>
                <label>Elegí la categoría</label>
                <select name="id_categoria">
                    <% listaCategorias.forEach(categoria => { %>
                        <option value="<%= categoria.id_categoria %>"  <%= locals.oldData && (oldData.id_categoria===categoria.id_categoria) ? 'selected':null %> ><%= categoria.nombre %></option>
                    <% }); %>

                    <!-- <option value="anteojos" <%= locals.oldData && (oldData.categoria_producto==='anteojos') ? 'selected':null %> >Lentes de sol</option>
                    <option value="ojotas"<%= locals.oldData && (oldData.categoria_producto==='ojotas') ? 'selected':null %> >Ojotas</option>
                    <option value="sombreros" <%= locals.oldData && (oldData.categoria_producto==='sombreros') ? 'selected':null %> >Sombreros</option>
                    <option value="trajes" <%= locals.oldData && (oldData.categoria_producto==='trajes') ? 'selected':null %> >Trajes de baño</option> -->
                </select>
                </h4>
                <h4>
                <div>
                   
                    <label for="imagen_producto">Subí una foto:</label>
                    <input type="file" name="imagen_producto" accept=".jpg, .png, .jpeg, .gif" id="imagen_producto" value="<%= product.imagen_producto %>">
                    <span class="text-danger"></span>
                </div>
                </h4>
                <input class = "botons" type = "submit" value="Editar producto">
        
        </section>
        </section>
    </form>

    <%}else {%>

        <h1>NO ESTÁS LOGUEADO</h1>
        <a href="/usuarios/login">Inicia sesión aquí</a>

    <%}%>

    <%- include('./partialViews/footer.ejs') %>
    <!-- <script src="/js/updateProductValidation.js"></script>  -->
</body>
</html>

